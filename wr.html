<!doctype html>
<html lang="ko">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="refresh" content="60;">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="Goosia">
  <meta name="Keywords" content="Work Rate">
  <meta name="Description" content="Today's work rate">
  <title>오늘의 공정율</title>
  <style>
    .center {
      display: block;
      margin-left: auto;
      margin-right: auto;
      max-width: 220px;
    }
    body {
      text-align: center;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    div {
      margin: 1rem 0;
    }
    span {
      font-weight: bold;
    }
    .small {
      font-size: x-small;
      text-align: right;
    }
    .large {
      padding: .5rem 1rem;
      border-radius: 5rem;
      background-color: #ffbc00;
      color: #4c3223;
      margin-top: 1.5rem;
      font-size: 20px;
    }
 </style>
 </head>
 <body>
  <div class="small">확인시간 : <span id="now">2020년 04월 27일</span></div>
  <img id="anim" src="/assets/images/rate/100.gif" class="center" />
  <div class="large">현재 공정율 : <span id="percent">0</span>%</div>
 </body>
 <script>
    var date = new Date();
    var week = date.getDay();
    var hour = date.getHours();
    var min = date.getMinutes();
    var sec = date.getSeconds();
    var done = 0;
    var index = 20/8;
    var today = date.getFullYear() + "년 " + date.getMonth() + "월 " + date.getDate() + "일 " + hour + "시 " + min + "분 " + sec + "초";

    if (week > 5)
    {
        week = 5;
    }

    if (hour < 9)
    {
        hour = 0;
        min = 0;
        sec = 0;
    }
    else if (hour > 18)
    {
        hour = 8;
        min = 0;
        sec = 0;
    }
    else if (hour >= 9 && hour <= 12)
    {
        hour -= 9;
        if (hour == 3)
        {
            min = 0;
            sec = 0;
        }
    }
    else if (hour >= 13 && hour <= 18)
    {
        hour -= 10;
        if (hour == 8)
        {
            min = 0;
            sec = 0;
        }
    }

    done = (week - 1) * 20 + (hour + min / 60 + sec / 3600) * index;
    
    var prefix = "/assets/images/rate/";
    var suffix = ".gif";
    if (done <= 10) anim = prefix + "10" + suffix;
    else if (done <= 20) anim = prefix + "20" + suffix;
    else if (done <= 30) anim = prefix + "30" + suffix;
    else if (done <= 40) anim = prefix + "40" + suffix;
    else if (done <= 60) anim = prefix + "60" + suffix;
    else if (done <= 80) anim = prefix + "80" + suffix;
    else if (done <= 90) anim = prefix + "90" + suffix;
    else if (done <= 100) anim = prefix + "100" + suffix;

    document.getElementById("percent").innerHTML = done.toFixed(2);
    document.getElementById("anim").src = anim;
    document.getElementById("now").innerHTML = today;

 </script>
</html>
